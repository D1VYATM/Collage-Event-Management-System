{% extends "base.html" %}
{% block content %}
<h3>Admin Dashboard</h3>

<!-- Create Event -->
<div class="card mb-4">
  <div class="card-body">
    <h5>Create Event</h5>
    <form method="post" action="{{ url_for('admin_create_event') }}">
      <div class="mb-2"><input name="title" class="form-control" placeholder="Event title" required></div>
      <div class="mb-2"><input name="date" class="form-control" placeholder="Date (e.g. 2025-12-01)"></div>
      <div class="mb-2"><textarea name="description" class="form-control" placeholder="Description"></textarea></div>
      <button class="btn btn-success">Create Event</button>
    </form>
  </div>
</div>

<!-- Events list -->
<h5>Events</h5>
<table class="table">
  <thead><tr><th>Title</th><th>Date</th><th>Participants</th></tr></thead>
  <tbody>
    {% for e in events %}
      <tr>
        <td>{{ e['title'] }}</td>
        <td>{{ e['date'] }}</td>
        <td><a class="btn btn-sm btn-info" href="{{ url_for('admin_participants', event_id=e['id']) }}">View</a></td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<!-- Feedback -->
<h5>Feedback</h5>
<ul class="list-group">
  {% for f in feedbacks %}
    <li class="list-group-item">
      <strong>{{ f['name'] or "Anonymous" }}</strong> ({{ f['email'] or "no email" }}) <br/>
      {{ f['message'] }} <small class="text-muted float-end">{{ f['timestamp'] }}</small>
    </li>
  {% endfor %}
  {% if not feedbacks %}
    <li class="list-group-item">No feedback yet.</li>
  {% endif %}
</ul>

<div class="mt-3">
  <a class="btn btn-outline-secondary" href="{{ url_for('admin_logout') }}">Logout Admin</a>
</div>
{% endblock %}
